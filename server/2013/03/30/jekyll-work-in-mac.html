<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<title>在Mac下搭建GitHub Pages环境</title>
	<link rel="stylesheet" type="text/css" href="/css/blog.css" media="screen" />
</head>
<body>

<section class="header">
	<a href="/">HOME</a>
	<a href="/about.html">ABOUT</a>
</section>

<section class="content">
	<section class="main_area"><article class="article">
	<h1 class="title">在Mac下搭建GitHub Pages环境</h1>
	<p>记录自己在mac环境下搭建jekyll所遇到的问题。</p>

<p>但凡来到这个页面的人，都应该知道github 跟 jekyll的吧，如果不知道，请猛击<a href='http://www.ruanyifeng.com/blog/2012/08/blogging_with_jekyll.html' target='_blank'>这里</a></p>

<p>了解完以后，就开始吧：） 一般来说，直接按上网上的教程，先把内容提交到github，然后就可以在username.github.com/project_name当中浏览了，这一步应该没什么难度：</p>

<ul>
<li>申请一个github账号；</li>

<li>在本地搭建好github环境；</li>

<li>在本地配置好github pages仓库；</li>

<li>push本地的github pages仓库；</li>

<li>大概十分钟后，在浏览器打开github_username.github.com/project_name即可；</li>
</ul>

<p>但如果需要在本地先预览github pages的话，就需要再额外处理一些东西，比如ruby、jekyll之类的。在网上搜一圈，大把的教程，然后我也按着教程来做。 在本地搭建jekyll环境的第一步：在终端下输入：</p>

<p><code>
$ gem install jekyll
</code></p>

<p>然后大把的教程都会跟你说这样就可以了。但是，我很怀疑写那些教程的人，有没有正式搭建过样的环境！我TM就不信只有我一个人遇到这些问题的：</p>

<ul>
<li>gem、ruby版本的问题</li>

<li>安装rvm的时候需要翻墙，翻墙完成后，安装rvm还是出错了</li>

<li>在执行jekyll &#8211;server的时候，也出错了</li>
</ul>

<p>好吧，我承认是自己人品的问题。但问题来了，还是要解决的，解决完成后，还是要记录的：</p>

<h4 id='gem'>gem版本的问题</h4>

<p>一般来说，mac下已经安装有gem的。如果没有的话，可以在网上搜索一下怎么安装。举个例子：</p>

<p><code>
// 查看gem的版本
$ gem -v
// 如果不是最新的（截止2013-03-31，最新版本是2.0.3），请更新最新版本
$ gem update --system
</code></p>

<h4 id='ruby'>ruby版本问题</h4>

<p>应该说是ruby的问题最麻烦，因为在升级ruby的时候，我参照网上的方法，用rvm来管理。举个例子：</p>

<p><code>
// 安装rvm
$ curl -L get.rvm.io | bash -s stable
// 执行根目录下的baserc文件
$ source ~/.bashrc
// 执行根目录下的base_profile文件
$ source ~/.bash_profile
// 查看有哪些版本的ruby可以更新
$ rvm list known
// 安装某一个版本的ruby，比如我现在即将要装的2.0.0
$ rvm install ruby-2.0.0
</code></p>

<p>事情进行到这一步，按理来说，应该会按照教程那样，完美到结局的，但是！！！！！！我在安装ruby的时候，竟然被墙了！！！是的，通过rvm安装ruby的时候，竟然被墙了！</p>

<p>好吧，竟然被墙，那就只能翻墙来解决了，通过google找到了ruby的<a href='http://ruby.taobao.org' target='_blank'>淘宝镜像服务器</a>，怎么使用呢：</p>

<p><code>
$ gem sources --remove https://rubygems.org/
$ gem sources -a http://ruby.taobao.org/
$ gem sources -l
</code></p>

<p>按照上面的修改，确保最后输出http://ruby.taobao.com的时候，表示您的电脑在安装ruby的时候，会去taobao那里下载源码来安装。</p>

<p>然后，继续执行刚才的ruby安装命令：</p>

<p><code>
$ rvm install ruby-2.0.0
</code></p>

<p>当按敲完上面的命令按回车后，我感觉我的心终于松了一口气。但TM的，就在个时候竟然出错了，大概是这样的提示：</p>

<p><code>
Missing required packages: pkgconfig, libxslt, libksba.
Cowardly refusing to continue, please read &#39;rvm autolibs&#39;.
There were package installation errors, make sure to read the log.
</code></p>

<p>WTF！大家都没有出错，偏偏我在更新的时候出错了，好吧。看了提示，提到了rvm autolibs，那就继续google之，终于在v2ex社区当中找到相应的解决方法：</p>

<p><code>
$ rvm install ruby-2.0.0 --autolibs=enabled
</code></p>

<p>OK，ruby升级成功！接下来，应该就是安装jekyll的时候：</p>

<p><code>
$ sudo gem install jekyll
</code></p>

<p>YES!没有任何错误，顺利安装成功（BTW，在安装jekyll的时候，可能会附带安装一些额外的东西）！那继续跟着网上的教程走下一下：</p>

<p><code>
$ cd github pages的项目路径
$ jekyll --server
</code></p>

<p>这个时候，一般都不会有出错的，一般来说，都会出现类似这样的成功信息：</p>

<p><code>
Building site: . -&gt; ./_site
Successfully generated site: . -&gt; ./_site
</code></p>

<p>但，我不得不怀疑我的人品，竟然当我输入jekyll &#8211;server的时候，竟然报错：jekyll unknown！！</p>

<p>我在home目录使用jekyll -v的时候却是没有任何问题，使用jekyll &#8211;server也是没问题的。</p>

<p>好吧，我大概猜到是因为在github pages项目下，没有相应的命令，说白了，就没有相应的环境变量。没办法，只好在根目录下，执行以下命令：</p>

<p><code>
$ vim .baserc
//编辑.baserc文件，添加：
alias jekyll=$HOME/.rvm/gems/ruby-2.0.0-p0/bin/jekyll
</code></p>

<p>保存退出后，再回到github pages项目下，输入jekyll &#8211;server，终于提示成功创建_site文件夹了！！</p>

<p>经历了这么曲折，终于在本地创建好jekyll环境了。</p>

<p>但事情没有结束，因为每次在写博客的时候，如果需要预览，都需要停止jekyll，然后再次jekyll &#8211;server，这样才能把新修改的东西重新编译到_site这个文件夹里面，这个步骤让我感觉非常恶心。</p>

<p>所以，我现在在想办法，能不能在我每次修改完内容的时候，自动编译呢？</p>

<p>好吧，关于jekyll的东西，先折腾到这里，有时间再去解决那个自动编译的问题！</p>
</article>

<div class="related">
	<h2>Related Posts</h2>
	<ul class="related_list">
		
			<li><span>10 Apr 2013</span> &raquo; <a href="/2013/04/10/java.html">重新开始学习Java</a></li>
		
			<li><span>05 Apr 2013</span> &raquo; <a href="/2013/04/05/http-shujubao.html">谈谈手机抓取http请求的数据包</a></li>
		
	</ul>
</div>

<div id="disqus_thread"></div>
<script type="text/javascript">
	/* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
	var disqus_shortname = 'junyong'; // required: replace example with your forum shortname

	/* * * DON'T EDIT BELOW THIS LINE * * */
	(function() {
		var dsq = document.createElement('script');
		dsq.type = 'text/javascript';
		dsq.async = true;
		dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a></section>
</section>

<footer class="footer">
	<nav class="footer_nav">
		<a href="/" class="home">回到首页</a>
		<a href="mailto:tenjessy@gmail.com" class="email">Gmail</a>
		<a href="https://github.com/tenjessy/blog" class="github">GitHub</a>
		<a href="http://weibo.com/u/1720170633" class="twitter">Twitter</a>
	</nav>
</footer>

<!-- google统计 -->
<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-25000858-2']);
	_gaq.push(['_trackPageview']);
	;;;(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
</script>

</body>
</html>
